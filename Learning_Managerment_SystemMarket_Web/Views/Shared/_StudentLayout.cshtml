@using Learning_Managerment_SystemMarket_Services.StudentServices.SubcriptionService;
@using Learning_Managerment_SystemMarket_Core.Models.Entities;
@using Learning_Managerment_SystemMarket_Core.Contracts;
@using Microsoft.AspNetCore.Identity
@inject ISubcriptionService _subcriptionService
@inject IUnitOfWork unitOfWork
@inject SignInManager<User> SignInManager
@inject UserManager<User> UserManager
@{
    var user = await UserManager.GetUserAsync(User);
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Learning_Managerment_SystemMarket_Web</title>

    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
    <link href="/frontend/css/vertical-responsive-menu.min.css" rel="stylesheet" />
    <link href="/frontend/css/style.css" rel="stylesheet" />
    <link href="/frontend/css/responsive.css" rel="stylesheet" />
    <link href="/frontend/css/night-mode.css" rel="stylesheet" />
    <link href="/frontend/css/instructor-dashboard.css" rel="stylesheet" />
    <link href="/frontend/css/instructor-responsive.css" rel="stylesheet" />
    <link href="/frontend/css/font-awesome.min.css" rel="stylesheet" />
    <link href="/frontend/vendor/OwlCarousel/assets/owl.carousel.css" rel="stylesheet" />
    <link href="/frontend/vendor/OwlCarousel/assets/owl.theme.default.min.css" rel="stylesheet" />
    <link href="/frontend/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="~/frontend/vendor/semantic/semantic.min.css">
    <link rel="stylesheet" type="text/css" href="~/frontend/vendor/snackbar/snackbar.min.css">
    <link rel="stylesheet" href="//cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css" />
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" />
    <script src="https://cdn.onesignal.com/sdks/OneSignalPageSDKES6.js?v=151509" async=""></script>
    <link href="~/css/studentStyle.css" rel="stylesheet" />
</head>
<body>
    <header class="header clearfix">
        <button type="button" id="toggleMenu" class="toggle_menu">
            <i class="uil uil-bars"></i>
        </button>
        <button id="collapse_menu" class="collapse_menu">
            <i class="uil uil-bars collapse_menu--icon "></i>
            <span class="collapse_menu--label"></span>
        </button>
        <div class="main_logo" id="logo">
            <a asp-action="Index" asp-controller="Student"><img src="/frontend/images/logo.svg" alt=""></a>
            <a asp-action="Index" asp-controller="Student"><img class="logo-inverse" src="/frontend/images/ct_logo.svg" alt=""></a>
        </div>
        <div class="top-category">
            <div class="ui compact menu cate-dpdwn">
                <div class="ui simple dropdown item" tabindex="0">
                    <a href="#" class="option_links p-0" title="categories"><i class="uil uil-apps"></i></a>
                    <div class="menu dropdown_category5" tabindex="-1">
                        <partial name="~/Views/Shared/_Categories.cshtml">
                    </div>
                </div>
            </div>
        </div>
        <div class="search120">
            <div class="ui search">
                <form asp-action="Explore" asp-controller="Student">
                    <input type="hidden" name="_token" value="nJlOQKC6HopjqJkfwa0wgscgW71F30K9vUOA3rSU">
                    <div class="ui left icon input swdh10">
                        <input class="prompt srch10" type="text" placeholder="Search for Tuts Videos, Tutors, Tests and more.." name="searchString">
                        <i class="uil uil-search-alt icon icon1"></i>
                    </div>
                </form>
            </div>
        </div>
        <div class="header_right">
            <ul>
                <li>
                    <partial name="~/Views/Shared/_LoginPartial.cshtml">
                </li>
                <li>
                    @if (user != null)
                    {
                        <a asp-area="StudentFunction" asp-controller="Cart" asp-action="GetCartByStudentId" asp-route-id="@user.IdUser" class="option_links" title="cart">
                            <i class="uil uil-shopping-cart-alt"></i>
                            <partial name="~/Views/Shared/_CountItemCart.cshtml">
                        </a>
                    }
                    else
                    {
                        <a asp-area="StudentFunction" asp-controller="Cart" asp-action="GetCartByStudentId" asp-route-id="" class="option_links" title="cart">
                            <i class="uil uil-shopping-cart-alt"></i>
                            <span class="noti_count">0</span>
                        </a>
                    }
                </li>
                <li class="ui dropdown" tabindex="0">
                    <partial name="~/Views/Shared/PartialViews/_InformationGuest.cshtml">
                </li>
            </ul>
        </div>
    </header>
    <nav class="vertical_nav">
        <div class="left_section menu_left" id="js-menu">
            <div class="left_section">
                <ul>
                    <li class="menu--item">
                        <a asp-area="StudentFunction" asp-action="Index" asp-controller="Student" class="menu--link active" title="Home">
                            <i class="uil uil-home-alt menu--icon"></i>
                            <span class="menu--label">Home</span>
                        </a>
                    </li>

                    <li class="menu--item">
                        <a asp-area="StudentFunction" asp-action="Explore" asp-controller="Student" class="menu--link " title="Explore">
                            <i class="uil uil-search menu--icon"></i>
                            <span class="menu--label">Explore</span>
                        </a>
                    </li>
                    <li class="menu--item menu--item__has_sub_menu ">
                        <label class="menu--link" title="Categories">
                            <i class="uil uil-layers menu--icon"></i>
                            <span class="menu--label">Categories</span>
                        </label>
                        <ul class="sub_menu">
                            <partial name="~/Views/Shared/_Categories.cshtml">
                        </ul>
                    </li>
                    <li class="menu--item">
                        @if (user != null)
                        {
                            <a asp-area="StudentFunction" asp-action="SavedCourses" asp-controller="SavedCourse" asp-route-id="@user.IdUser" class="menu--link " title="SavedCourses">
                                <i class="uil uil-heart-alt menu--icon"></i>
                                <span class="menu--label">Saved Courses</span>
                            </a>
                        }
                        else
                        {
                            <a id="login" asp-area="Identity" asp-page="/Account/Login"
                               class="menu--link " title="Enrolled"
                               onclick="return confirm('You must login to show save course ')">
                                <i class="uil uil-bag menu--icon"></i>
                                <span class="menu--label">Enrolled</span>
                            </a>
                        }
                    </li>


                    <li class="menu--item">
                        <a asp-area="StudentFunction" asp-controller="Filter" asp-action="FilterPage" class="menu--link " title="Filter">
                            <i class="uil uil-abacus menu--icon"></i>
                            <span class="menu--label">Filter</span>
                        </a>
                    </li>
                    <li class="menu--item">
                        @if (user != null)
                        {
                            <a asp-area="StudentFunction" asp-controller="Cart" asp-action="EnrolledCourse" class="menu--link " title="Enrolled">
                                <i class="uil uil-bag menu--icon"></i>
                                <span class="menu--label">Enrolled</span>
                            </a>
                        }
                        else
                        {
                            <a id="login" asp-area="Identity" asp-page="/Account/Login"
                               class="menu--link " title="Enrolled"
                               onclick="return confirm('You must login to show enrolled course')">
                                <i class="uil uil-bag menu--icon"></i>
                                <span class="menu--label">Enrolled</span>
                            </a>
                        }
                    </li>
                </ul>
            </div>
            @if (user != null)
            {
                var subcriptionExist = await _subcriptionService.GetAllSubInstructorByStudentId(user.IdUser);

                <div class="left_section">
                    <h6 class="left_title">SUBSCRIPTIONS</h6>
                    <ul>
                        <!--subcribe-->
                        @foreach (var item in subcriptionExist)
                        {
                            <li class="menu--item">
                                <a asp-area="StudentFunction" asp-controller="Instructor" asp-action="InstructorDetails" asp-route-id="@item.Instructor.Id" class="menu--link user_img">
                                    <img src="@item.Instructor.Image" alt="">
                                    @item.Instructor.InstructorName
                                </a>
                            </li>
                        }
                        <li class="menu--item">

                            <a asp-area="StudentFunction" asp-controller="Instructor" asp-action="GetSubcriptionByStudentId" asp-route-id="@user.IdUser" class="menu--link " title="See All">
                                <i class="uil uil-eye menu--icon"></i>
                                <span class="menu--label">See All</span>
                            </a>
                        </li>
                        <li class="menu--item">
                            <a asp-area="StudentFunction" asp-controller="Instructor" asp-action="BrowseInstructors" class="menu--link " title="Browse Instructors">

                                <i class="uil uil-plus-circle menu--icon"></i>
                                <span class="menu--label">Browse Instructors</span>
                            </a>
                        </li>
                    </ul>
                </div>
            }
            <div class="left_section pt-2">
                <ul>
                    @if (user != null)
                    {
                        <li class="menu--item">
                            <a asp-area="StudentFunction" asp-controller="Student" asp-action="Update" asp-route-id="@user.Id" class="menu--link" title="Setting">
                                <i class="uil uil-cog menu--icon"></i>
                                <span class="menu--label">Setting</span>
                            </a>
                        </li>
                    }
                    <li class="menu--item">
                        <a href="#" class="menu--link " title="Help">
                            <i class="uil uil-question-circle menu--icon"></i>
                            <span class="menu--label">Help</span>
                        </a>
                    </li>
                    <li class="menu--item">
                        <a href="#" class="menu--link " title="Report History">
                            <i class="uil uil-windsock menu--icon"></i>
                            <span class="menu--label">Report History</span>
                        </a>
                    </li>

                    <li class="menu--item ">
                        <a href="#" class="menu--link " title="Send Feedback">
                            <i class="uil uil-comment-alt-exclamation menu--icon"></i>
                            <span class="menu--label">Send Feedback</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="wrapper">
        <div class="sa4d25">
            <div class="container-fluid">
                @RenderBody()
            </div>
        </div>
        <footer class="footer mt-40">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-12 col-lg-9 col-md-9">
                        <div class="item_f1">
                            <a href="#">Copyright Policy</a>
                            <a href="#">Terms</a>
                            <a href="#">Privacy Policy</a>
                        </div>
                    </div>

                    <div class="col-lg-12">
                        <div class="footer_bottm">
                            <div class="row">
                                <div class="col-md-6">
                                    <ul class="fotb_left">
                                        <li>
                                            <a href="https://coursearly.com/cursus/public">
                                                <div class="footer_logo">
                                                    <img src="/frontend/images/logo1.svg" alt="">
                                                </div>
                                            </a>
                                        </li>
                                        <li>
                                            <p>
                                                © @DateTime.Now.Year
                                                <strong>Cursus</strong>. All Rights Reserved.
                                            </p>
                                        </li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <div class="edu_social_links">
                                        <a href="http://facebook.com/facebook1"><i class="fab fa-facebook-f"></i></a>
                                        <a href="http://twitter.com/twitter2"><i class="fab fa-twitter"></i></a>
                                        <a href="http://www.linkedin.com/linkdin5"><i class="fab fa-linkedin-in"></i></a>
                                        <a href="http://www.instagram.com/Instagram3"><i class="fab fa-instagram"></i></a>
                                        <a href="http://www.youtube.com/youtube4"><i class="fab fa-youtube"></i></a>
                                        <a href="http://www.pinterest.com/pinterest6"><i class="fab fa-pinterest-p"></i></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <script src="/frontend/js/vertical-responsive-menu.min.js"></script>
    <script src="/frontend/js/jquery.min.js"></script>
    <script src="/frontend/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="/frontend/vendor/OwlCarousel/owl.carousel.js"></script>
    <script src="/frontend/vendor/semantic/semantic.min.js"></script>
    <script src="/frontend/js/custom.js"></script>
    <script src="/frontend/js/night-mode.js"></script>
    <script src="/frontend/vendor/snackbar/snackbar.min.js"></script>
    <script src="//cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
    <script src="~/js/StudentJs.js"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>